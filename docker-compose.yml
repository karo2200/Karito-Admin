version: '3.8'

services:
  web:
    build: .
    ports:
      - '4500:4500'
    env_file:
      - .env.${ENV:-dev} # بارگذاری فایل env متناسب با ENV (پیش‌فرض dev)
    environment:
      - NODE_ENV=${ENV:-dev} # مقدار NODE_ENV از ENV گرفته می‌شود یا dev
    restart: unless-stopped # ری‌استارت خودکار در صورت توقف غیرمنتظره
